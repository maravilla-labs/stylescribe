/**
 * @title Select
 * @description Native dropdown select with light tinted background, custom chevron indicator, and optional prepend icon.
 * @group Forms
 * @order 4
 * @dependencies icon
 * @variations default, error, success, disabled, sm, lg
 * @elements
 * - name: field
 *   html: <select class="{{class}}"><option>Select...</option></select>
 * - name: icon
 *   html: <span class="{{class}} ds-icon ds-icon--chevron-down"></span>
 * - name: prepend
 *   html: <span class="{{class}}"></span>
 * @examples
 * - title: Default Select
 *   description: Basic dropdown select
 *   code: |
 *     <div class="ds-select">
 *       <select class="ds-select__field">
 *         <option value="">Select an option...</option>
 *         <option value="1">Option One</option>
 *         <option value="2">Option Two</option>
 *         <option value="3">Option Three</option>
 *       </select>
 *       <svg class="ds-select__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Select with Value
 *   description: Select showing chosen option
 *   code: |
 *     <div class="ds-select">
 *       <select class="ds-select__field">
 *         <option value="">Select an option...</option>
 *         <option value="1">Option One</option>
 *         <option value="2" selected>Option Two</option>
 *         <option value="3">Option Three</option>
 *       </select>
 *       <svg class="ds-select__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Select with Prepend Icon
 *   description: Leading icon for context
 *   code: |
 *     <div class="ds-select ds-select--has-prepend">
 *       <span class="ds-select__prepend">
 *         <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>
 *       </span>
 *       <select class="ds-select__field">
 *         <option value="">Select timezone...</option>
 *         <option value="utc">UTC</option>
 *         <option value="est">Eastern Time</option>
 *         <option value="pst">Pacific Time</option>
 *       </select>
 *       <svg class="ds-select__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Error State
 *   description: Select with validation error
 *   code: |
 *     <div class="ds-select ds-select--error">
 *       <select class="ds-select__field" aria-invalid="true">
 *         <option value="">Please select...</option>
 *         <option value="1">Option One</option>
 *       </select>
 *       <svg class="ds-select__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Success State
 *   description: Select with validation success
 *   code: |
 *     <div class="ds-select ds-select--success">
 *       <select class="ds-select__field">
 *         <option value="">Select country...</option>
 *         <option value="us" selected>United States</option>
 *         <option value="uk">United Kingdom</option>
 *       </select>
 *       <svg class="ds-select__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Disabled Select
 *   description: Non-interactive select
 *   code: |
 *     <div class="ds-select ds-select--disabled">
 *       <select class="ds-select__field" disabled>
 *         <option value="locked">Locked Option</option>
 *       </select>
 *       <svg class="ds-select__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Small Select
 *   description: Compact size variant
 *   code: |
 *     <div class="ds-select ds-select--sm">
 *       <select class="ds-select__field">
 *         <option value="">Size...</option>
 *         <option value="s">Small</option>
 *         <option value="m">Medium</option>
 *         <option value="l">Large</option>
 *       </select>
 *       <svg class="ds-select__icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 * - title: Large Select
 *   description: Prominent size variant
 *   code: |
 *     <div class="ds-select ds-select--lg">
 *       <select class="ds-select__field">
 *         <option value="">Select category...</option>
 *         <option value="tech">Technology</option>
 *         <option value="design">Design</option>
 *         <option value="business">Business</option>
 *       </select>
 *       <svg class="ds-select__icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m6 9 6 6 6-6"/></svg>
 *     </div>
 */

@layer components {
  .ds-select {
    /* ===== Component Tokens ===== */
    --select-height: 40px;
    --select-bg: var(--color-semantic-form-bg);
    --select-bg-focus: var(--color-semantic-form-bg-focus);
    --select-border: var(--color-semantic-form-border);
    --select-border-focus: var(--color-semantic-form-border-focus);
    --select-border-error: var(--color-danger-base);
    --select-border-success: var(--color-success-base);
    --select-text: var(--color-semantic-form-text);
    --select-placeholder: var(--color-semantic-form-placeholder);
    --select-radius: var(--border-radius-md);
    --select-padding-x: var(--spacing-scale-md);
    --select-padding-right: 40px;
    --select-font-size: var(--font-size-base);
    --select-icon-color: var(--color-semantic-text-muted);
    --select-shadow-focus: 0 0 0 3px var(--color-overlay-brand);

    /* ===== Base Styles ===== */
    position: relative;
    display: inline-flex;
    align-items: center;
    width: 100%;
    height: var(--select-height);
    background: var(--select-bg);
    border: 1px solid var(--select-border);
    border-radius: var(--select-radius);
    transition:
      background var(--transition-duration-fast),
      border-color var(--transition-duration-fast),
      box-shadow var(--transition-duration-fast);

    &:focus-within {
      background: var(--select-bg-focus);
      border-color: var(--select-border-focus);
      box-shadow: var(--select-shadow-focus);
    }

    /* ===== Elements ===== */
    &__field {
      flex: 1;
      width: 100%;
      height: 100%;
      padding: 0 var(--select-padding-right) 0 var(--select-padding-x);
      font-family: var(--font-family-base);
      font-size: var(--select-font-size);
      color: var(--select-text);
      background: transparent;
      border: none;
      border-radius: var(--select-radius);
      outline: none;
      cursor: pointer;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;

      &:invalid,
      option[value=""] {
        color: var(--select-placeholder);
      }

      option {
        color: var(--select-text);
        background: var(--color-semantic-surface);
      }
    }

    &__icon {
      position: absolute;
      right: var(--select-padding-x);
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--select-icon-color);
      pointer-events: none;
      transition: transform var(--transition-duration-fast);
    }

    &__prepend {
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      height: 100%;
      padding-left: var(--select-padding-x);
      color: var(--select-icon-color);
    }

    /* ===== Variations (token overrides only) ===== */

    /* Has prepend - adjust field padding */
    &--has-prepend {
      .ds-select__field {
        padding-left: var(--spacing-scale-xs);
      }
    }

    /* Error state */
    &--error {
      --select-border: var(--select-border-error);
      --select-shadow-focus: 0 0 0 3px var(--color-danger-light);

      &:focus-within {
        border-color: var(--select-border-error);
      }
    }

    /* Success state */
    &--success {
      --select-border: var(--select-border-success);
      --select-shadow-focus: 0 0 0 3px var(--color-success-light);

      &:focus-within {
        border-color: var(--select-border-success);
      }
    }

    /* Disabled state */
    &--disabled {
      --select-bg: var(--color-semantic-form-bg-disabled);
      --select-text: var(--color-semantic-text-muted);
      opacity: 0.6;
      cursor: not-allowed;
      pointer-events: none;
    }

    /* Size: Small */
    &--sm {
      --select-height: 32px;
      --select-padding-x: var(--spacing-scale-sm);
      --select-padding-right: 32px;
      --select-font-size: var(--font-size-sm);
    }

    /* Size: Large */
    &--lg {
      --select-height: 48px;
      --select-padding-x: var(--spacing-scale-lg);
      --select-padding-right: 48px;
      --select-font-size: var(--font-size-lg);
    }
  }
}
