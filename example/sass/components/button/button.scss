/**
 * @title Button
 * @description Primary interactive element for user actions. Supports multiple
 *   variants for different contexts and semantic meanings.
 * @navtitle Button
 * @group Actions
 * @order 1
 * @verified true
 * @role button
 * @maintag button
 * @classname btn
 * @dependencies spinner, icon
 * @variations primary, secondary, outline, ghost, danger
 * @additional_variations sm, lg, loading
 * @elements
 * - name: icon
 *   html: <span class="{{class}} ds-icon ds-icon--forward"></span>
 * - name: label
 *   html: <span class="{{class}}">Button</span>
 * @examples
 * - title: Primary Button
 *   description: Main call-to-action for important actions
 *   code: |
 *     <button class="ds-btn ds-btn--primary">
 *       <svg class="ds-btn__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
 *       <span class="ds-btn__label">Get Started</span>
 *     </button>
 * - title: Secondary Button
 *   description: Supporting action with less emphasis
 *   code: <button class="ds-btn ds-btn--secondary">Learn More</button>
 * - title: Outline Button
 *   description: Subtle bordered style
 *   code: <button class="ds-btn ds-btn--outline">View Details</button>
 * - title: Button with Icon
 *   description: Visual indicator with action text
 *   code: |
 *     <button class="ds-btn ds-btn--primary">
 *       <svg class="ds-btn__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
 *       <span class="ds-btn__label">Continue</span>
 *     </button>
 * - title: Icon Only Button
 *   description: Compact button with just an icon
 *   code: |
 *     <button class="ds-btn ds-btn--ghost" aria-label="Settings">
 *       <svg class="ds-btn__icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/></svg>
 *     </button>
 * - title: Danger Button
 *   description: Destructive action warning
 *   code: |
 *     <button class="ds-btn ds-btn--danger">
 *       <svg class="ds-btn__icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
 *       <span class="ds-btn__label">Delete</span>
 *     </button>
 * - title: Loading State
 *   description: Shows progress during async operations
 *   code: |
 *     <button class="ds-btn ds-btn--primary ds-btn--loading" disabled>
 *       <span class="ds-spinner ds-spinner--inline ds-spinner--light"></span>
 *       <span class="ds-btn__label">Saving...</span>
 *     </button>
 * - title: Size Variations
 *   description: Small and large button sizes
 *   code: |
 *     <button class="ds-btn ds-btn--primary ds-btn--sm">Small</button>
 *     <button class="ds-btn ds-btn--primary">Default</button>
 *     <button class="ds-btn ds-btn--primary ds-btn--lg">Large</button>
 */

@layer components {
  .ds-btn {
    /* Internal token defaults (fallbacks) */
    --btn-bg: transparent;
    --btn-bg-hover: var(--btn-bg);
    --btn-bg-active: var(--btn-bg-hover);

    --btn-border: transparent;
    --btn-border-hover: var(--btn-border);

    --btn-text: var(--color-semantic-text);
    --btn-text-hover: var(--btn-text);

    --btn-shadow: none;
    --btn-shadow-hover: var(--btn-shadow);

    --btn-hover-translate-y: 0;

    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--spacing-scale-sm);
    padding: var(--spacing-scale-sm) var(--spacing-scale-md);

    font-family: var(--font-family-base);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    line-height: var(--font-lineHeight-normal);
    text-decoration: none;

    border: var(--border-width-thin) solid var(--btn-border);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    position: relative;

    color: var(--btn-text);
    background: var(--btn-bg);
    box-shadow: var(--btn-shadow);

    transition:
      background var(--transition-duration-fast),
      color var(--transition-duration-fast),
      border-color var(--transition-duration-fast),
      box-shadow var(--transition-duration-fast),
      transform var(--transition-duration-fast);

    &:hover:not(:disabled) {
      background: var(--btn-bg-hover);
      color: var(--btn-text-hover);
      border-color: var(--btn-border-hover);
      box-shadow: var(--btn-shadow-hover);
      transform: translateY(var(--btn-hover-translate-y));
    }

    &:active:not(:disabled) {
      background: var(--btn-bg-active);
      transform: translateY(0);
    }

    &:focus-visible {
      outline: 2px solid var(--color-primary-500);
      outline-offset: 2px;
    }

    &:disabled {
      opacity: 0.65;
      cursor: not-allowed;
    }

    /* Elements */
    &__icon {
      display: inline-flex;
      align-items: center;
      flex-shrink: 0;

      svg {
        display: block;
      }
    }

    &__label {
      display: inline-block;
    }

    /* Sizes */
    &--sm {
      padding: var(--spacing-scale-xs) var(--spacing-scale-sm);
      font-size: var(--font-size-sm);
      gap: var(--spacing-scale-xs);
    }

    &--lg {
      padding: var(--spacing-scale-md) var(--spacing-scale-lg);
      font-size: var(--font-size-lg);
    }

    /* Loading */
    &--loading {
      .ds-btn__label {
        opacity: 0.7;
      }
    }
  }

  /* Variants only set tokens */

  .ds-btn--primary {
    --btn-bg: linear-gradient(135deg, var(--color-primary-500) 0%, var(--color-primary-600) 100%);
    --btn-bg-hover: linear-gradient(135deg, var(--color-primary-600) 0%, var(--color-primary-700, var(--color-primary-600)) 100%);
    --btn-border: var(--color-primary-500);
    --btn-border-hover: var(--color-primary-600);
    --btn-text: #fff;
    --btn-text-hover: #fff;
    --btn-shadow: var(--shadow-sm);
    --btn-shadow-hover: var(--shadow-md);
    --btn-hover-translate-y: -1px;
  }

  .ds-btn--secondary {
    --btn-bg: var(--color-secondary-base);
    --btn-bg-hover: var(--color-secondary-dark);
    --btn-border: var(--color-secondary-base);
    --btn-border-hover: var(--color-secondary-dark);
    --btn-text: #fff;
    --btn-text-hover: #fff;
  }

  .ds-btn--outline {
    --btn-bg: transparent;
    --btn-bg-hover: var(--color-primary-500);
    --btn-border: var(--color-primary-500);
    --btn-border-hover: var(--color-primary-500);
    --btn-text: var(--color-primary-500);
    --btn-text-hover: #fff;
  }

  .ds-btn--ghost {
    --btn-bg: transparent;
    --btn-bg-hover: var(--color-neutral-100);
    --btn-border: transparent;
    --btn-border-hover: transparent;
    --btn-text: var(--color-semantic-text);
    --btn-text-hover: var(--color-semantic-text);

    padding: var(--spacing-scale-sm);
  }

  .ds-btn--danger {
    --btn-bg: linear-gradient(135deg, var(--color-danger-base) 0%, var(--color-danger-dark) 100%);
    --btn-bg-hover: linear-gradient(135deg, var(--color-danger-dark) 0%, var(--color-danger-darker, var(--color-danger-dark)) 100%);
    --btn-border: var(--color-danger-base);
    --btn-border-hover: var(--color-danger-dark);
    --btn-text: #fff;
    --btn-text-hover: #fff;
  }
}
